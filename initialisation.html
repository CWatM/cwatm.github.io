<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>9. Initialisation &#8212; Community Water Model</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Community Water Model" href="index.html" />
    <link rel="next" title="10. Post processing" href="postpro.html" />
    <link rel="prev" title="8. NetCDF meta data" href="metadata.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="postpro.html" title="10. Post processing"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="metadata.html" title="8. NetCDF meta data"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CWAT Model</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="initialisation">
<h1>9. Initialisation<a class="headerlink" href="#initialisation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>CWATM needs to have estimates of the initial state of the internal storage variables, e.g. the amount of water stored in snow, soil, groundwater etc.</p>
<p>There are two possibilities:</p>
<ol class="arabic simple">
<li>The initial state of the internal storage variables are unknown and a <strong>first</strong> guess has to be used e.g. all storage variables are half filled.</li>
<li>The initial state is known from a previous run, where the variables are stored at a certain time step. This is called <strong>warm start</strong></li>
</ol>
<p>The the <strong>warm start</strong> is usful for:</p>
<ul class="simple">
<li>using a long pre-run to find the steady-state storage of the groundwater storage and use it as initial value</li>
<li>using the stored variables to shorten the warm-up period</li>
<li>using the stored variables to restart every day with the values from the pre3vious day (forecasting mode)</li>
</ul>
</div>
<div class="section" id="example-of-soil-moisture">
<h2>Example of soil moisture<a class="headerlink" href="#example-of-soil-moisture" title="Permalink to this headline">¶</a></h2>
<p>The next figure shows the impact of different initial condition on the soil moisture of the lower soil.
In one of the simulations the soil is initially almost ompletely saturated. In another simulation the soil is completely dry and the third simulation starts with initial conditions in between the two extremes.</p>
<p>In the beginning the effect of different initial condition can be seen clearly. But after one year the three curves converge. The <strong>memory</strong> of the lower soil goes back for about one year.</p>
<p>For all the initial condition apart from groundwater the memory is about 12 month. That means practically a spin-up of one year is sufficient to habve enough warm-up time.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/init_soilmoisture.jpg"><img alt="_images/init_soilmoisture.jpg" src="_images/init_soilmoisture.jpg" style="width: 600px;" /></a>
</div>
<p>Figure: Simulation of soil moisture in the lower soil with different initial conditions</p>
<p>For the groundwater zone a longer warm-up period is needed, because of the slow response of groundwater. Here a rather fast reacting groundwater storage is shown with the three curves coverge after two years.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/init_groundwater.jpg"><img alt="_images/init_groundwater.jpg" src="_images/init_groundwater.jpg" style="width: 600px;" /></a>
</div>
<p>Figure: Simulation of groundwater storage with different initial conditions</p>
</div>
<div class="section" id="cold-start">
<h2>Cold start<a class="headerlink" href="#cold-start" title="Permalink to this headline">¶</a></h2>
<p>For a <strong>cold start</strong> the values of the storage variables are unknown and set to a &#8220;first&#8221; guess.
A list of variables and their default value for a <strong>cold start</strong> is given below in: <a class="reference internal" href="#rst-initialcondition"><span class="std std-ref">Initial conditions</span></a></p>
<div class="section" id="set-up-a-cold-start-in-the-settingsfile">
<h3>Set up a cold start in the settingsfile<a class="headerlink" href="#set-up-a-cold-start-in-the-settingsfile" title="Permalink to this headline">¶</a></h3>
<p>In the settings file the option: <strong>load_initial</strong> has to be set on <strong>False</strong></p>
<div class="highlight-ini"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>143
144
145
146
147
148
149
150</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="na">StepEnd</span> <span class="o">=</span>  <span class="s">5</span>

<span class="c1">#-------------------------------------------------------</span>
<span class="k">[INITITIAL CONDITIONS]</span>
<span class="c1">#-------------------------------------------------------</span>

<span class="c1"># for a warm start initial variables a loaded</span>
<span class="c1"># e.g for a start on 01/01/2010 load variable from 31/12/2009</span>
</pre></div>
</td></tr></table></div>
<p>And all the initial conditions is the different sections have to be set to NONE
The values here (if not set to NONE) will overwrite the initial conditions of the general initial condition netCDF file</p>
<p>For example:</p>
<div class="highlight-ini"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>330
331
332</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="na">FrostIndexThreshold</span> <span class="o">=</span> <span class="s">56</span>

<span class="c1">#--------------------------------------------------------------</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is possible to exclude the warming up period of your model run for further analysis of results by setting the <strong>SpinUp</strong> option</p>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">TIME</span><span class="o">-</span><span class="n">RELATED_CONSTANTS</span><span class="p">]</span>
<span class="n">SpinUp</span> <span class="o">=</span>  <span class="mi">01</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="mi">1995</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="storing-initial-variables">
<h2>Storing initial variables<a class="headerlink" href="#storing-initial-variables" title="Permalink to this headline">¶</a></h2>
<p>In the settings file the option <strong>save_intitisal</strong> has to be set to <strong>True</strong></p>
<p>The name of the initial netCDF4 file has to be put in <strong>initsave</strong></p>
<p>and one or more dates have to be specified in StepInit</p>
<div class="highlight-ini"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>152
153
154
155
156</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="na">initLoad</span> <span class="o">=</span> <span class="s">$(BASICS:PathRoot)/init/Rhine_20030131.nc</span>

<span class="c1"># saving variables from this run, to initiate a warm start next run</span>
<span class="c1"># StepInit = saving date, can be more than one: 10/01/1973 20/01/1973</span>
<span class="na">save_initial</span> <span class="o">=</span> <span class="s">True</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="warm-start">
<h2>Warm start<a class="headerlink" href="#warm-start" title="Permalink to this headline">¶</a></h2>
<p>CWATM can write internal variables to a netCDF file for choosen timesteps. These netCDF files can be used as the initial conditions for a suceeding simulation.</p>
<p>This is useful for establishing a steady-state with a long-term run and then using this steady-state for succeding simulations or for an every day run (forecasting mode)</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If the parameters are changes after a run(especially the groundwater parameters) the stored initial values do not represent the conditions of the storage variables. Stored initial conditions should <strong>not</strong> be used as initial values for a model run with another set of parameters. If you do this during calibration, you will not be able to reproduce the calibration results!</p>
</div>
<div class="section" id="id1">
<h3>Set up a cold start in the settingsfile<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>In the settings file the option: <strong>load_initial</strong> has to be set on <strong>True</strong>
And define the name of the netcdf4 file in <strong>initLoad</strong></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Use the initial values of the previous day here. E.g. if you run the model from 01/01/2006 use the inital condition from 31/12/2005</p>
</div>
<div class="highlight-ini"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>143
144
145
146
147
148
149
150</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="na">StepEnd</span> <span class="o">=</span>  <span class="s">5</span>

<span class="c1">#-------------------------------------------------------</span>
<span class="k">[INITITIAL CONDITIONS]</span>
<span class="c1">#-------------------------------------------------------</span>

<span class="c1"># for a warm start initial variables a loaded</span>
<span class="c1"># e.g for a start on 01/01/2010 load variable from 31/12/2009</span>
</pre></div>
</td></tr></table></div>
<p>There is also the possibility to set single variables to a certain value (or map)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># INITIAL CONDITIONS (None either 0 or use init file)</span>
<span class="n">FrostIndexIni</span> <span class="o">=</span> <span class="mf">56.0</span>
</pre></div>
</div>
<p>Or</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># INITIAL CONDITIONS (None either 0 or use init file)</span>
<span class="n">FrostIndexIni</span> <span class="o">=</span> <span class="o">../</span><span class="n">frostIndex31122005</span><span class="o">.</span><span class="n">map</span>
</pre></div>
</div>
<p>This will <em>override</em> the value of an initial netcdf4 file.</p>
</div>
</div>
<div class="section" id="initial-conditions">
<span id="rst-initialcondition"></span><h2>Initial conditions<a class="headerlink" href="#initial-conditions" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="20%" />
<col width="40%" />
<col width="20%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">No.</th>
<th class="head">Variable</th>
<th class="head">Description</th>
<th class="head">Default value</th>
<th class="head">Number of maps</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>SnowCover</td>
<td>Snow cover for up to 7 zones</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>FrostIndex</td>
<td>Degree days frost threshold</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="row-even"><td>3</td>
<td>Forest state</td>
<td>Interception storage</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>Top water layer</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>Soil storage for 3 soil layers</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>Grassland state</td>
<td>Interception storage</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>Top water layer</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>Soil storage for 3 soil layers</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="row-even"><td>5</td>
<td>Paddy irrigation state</td>
<td>Interception storage</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>Top water layer</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>Soil storage for 3 soil layers</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>Irrigation state</td>
<td>Interception storage</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>Top water layer</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>Soil storage for 3 soil layers</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="row-even"><td>7</td>
<td>Sealed area state</td>
<td>Interception storage</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>Groundwater</td>
<td>Groundwater storage</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="row-even"><td>9</td>
<td>Runoff concentration</td>
<td>10 layers of runoff concentration</td>
<td>0</td>
<td>10</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>Routing</td>
<td>Channel storage</td>
<td>0.2 * total cross section</td>
<td>1</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>Routing</td>
<td>Riverbed exchange</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>Routing</td>
<td>Discharge</td>
<td>depending on ini channel stor.</td>
<td>1</td>
</tr>
<tr class="row-even"><td>11</td>
<td>Lakes and Reservoirs</td>
<td>Lake inflow</td>
<td>from HydroLakes database</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>Lake outflow</td>
<td>same as lake inflow</td>
<td>1</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>Lake&amp;Res outflow to other lakes&amp;res</td>
<td>same as lake inflow</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>Lake Storage</td>
<td>based on inflow and lake area</td>
<td>1</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>Reservoir Storage</td>
<td>0.5 * max. reservoir storage</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/CWATM1.jpg" alt="Logo"/>
            </a></p>
<h3><a href="index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="nexus.html">2. Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="community.html">3. Features of the Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="modeldesign.html">4. Model design and processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">5. Setup of the model</a></li>
<li class="toctree-l1"><a class="reference internal" href="runmodel.html">6. Running the model</a></li>
<li class="toctree-l1"><a class="reference internal" href="settingsfile.html">7. Settings file</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">8. NetCDF meta data</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">9. Initialisation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-of-soil-moisture">Example of soil moisture</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cold-start">Cold start</a></li>
<li class="toctree-l2"><a class="reference internal" href="#storing-initial-variables">Storing initial variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#warm-start">Warm start</a></li>
<li class="toctree-l2"><a class="reference internal" href="#initial-conditions">Initial conditions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="postpro.html">10. Post processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">11. Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="results.html">12. Demo of the model</a></li>
<li class="toctree-l1"><a class="reference internal" href="todo.html">13. TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="updates.html">14. Updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="bugs.html">15. Bug and bugfix report</a></li>
<li class="toctree-l1"><a class="reference internal" href="publication.html">16. Publication</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer.html">17. Developer</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">18. License and Conditions</a></li>
<li class="toctree-l1"><a class="reference internal" href="source.html">19. <strong>Source code</strong></a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="metadata.html"
                        title="previous chapter">8. NetCDF meta data</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="postpro.html"
                        title="next chapter">10. Post processing</a></p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="postpro.html" title="10. Post processing"
             >next</a> |</li>
        <li class="right" >
          <a href="metadata.html" title="8. NetCDF meta data"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CWAT Model</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, PB.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.6.
    </div>
  </body>
</html>